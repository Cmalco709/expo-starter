{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _global$_UILIB_TESTIN;\nimport _isEqual from \"lodash/isEqual\";\nimport { useCallback, useRef, useState } from 'react';\nimport { Constants } from \"../../commons/new\";\nvar wasMeasuredDefaultValue = (_global$_UILIB_TESTIN = global._UILIB_TESTING) != null ? _global$_UILIB_TESTIN : false;\nexport default function useHiddenLocation() {\n  var getHiddenLocation = function getHiddenLocation(_ref) {\n    var _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? Constants.screenWidth : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? Constants.windowHeight : _ref$height,\n      _ref$wasMeasured = _ref.wasMeasured,\n      wasMeasured = _ref$wasMeasured === void 0 ? wasMeasuredDefaultValue : _ref$wasMeasured;\n    return {\n      up: -y - height,\n      down: Constants.windowHeight - y,\n      left: -width - x,\n      right: Constants.screenWidth - x,\n      wasMeasured: wasMeasured\n    };\n  };\n  var _useState = useState(getHiddenLocation({})),\n    _useState2 = _slicedToArray(_useState, 2),\n    hiddenLocation = _useState2[0],\n    setHiddenLocation = _useState2[1];\n  var ref = useRef();\n  var layoutData = useRef();\n  var wasMeasured = useRef(wasMeasuredDefaultValue);\n  var measure = useCallback(function () {\n    if (ref.current && layoutData.current && layoutData.current.width > 0 && layoutData.current.height > 0) {\n      wasMeasured.current = true;\n      var _layoutData$current = layoutData.current,\n        x = _layoutData$current.x,\n        y = _layoutData$current.y,\n        width = _layoutData$current.width,\n        height = _layoutData$current.height;\n      setHiddenLocation(getHiddenLocation({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        wasMeasured: true\n      }));\n    }\n  }, []);\n  var setRef = useCallback(function (node) {\n    if (node) {\n      ref.current = node;\n      measure();\n    }\n  }, [measure]);\n  var onLayout = useCallback(function (event) {\n    if (!_isEqual(layoutData.current, event.nativeEvent.layout)) {\n      layoutData.current = event.nativeEvent.layout;\n      measure();\n    }\n  }, [measure]);\n  return {\n    setRef: setRef,\n    onLayout: onLayout,\n    hiddenLocation: hiddenLocation\n  };\n}","map":{"version":3,"names":["_isEqual","useCallback","useRef","useState","Constants","wasMeasuredDefaultValue","_global$_UILIB_TESTIN","global","_UILIB_TESTING","useHiddenLocation","getHiddenLocation","_ref","_ref$x","x","_ref$y","y","_ref$width","width","screenWidth","_ref$height","height","windowHeight","_ref$wasMeasured","wasMeasured","up","down","left","right","_useState","_useState2","_slicedToArray","hiddenLocation","setHiddenLocation","ref","layoutData","measure","current","_layoutData$current","setRef","node","onLayout","event","nativeEvent","layout"],"sources":["/workspaces/expo-starter/node_modules/react-native-ui-lib/src/incubator/hooks/useHiddenLocation.js"],"sourcesContent":["import _isEqual from \"lodash/isEqual\";\nimport { useCallback, useRef, useState } from 'react';\nimport { Constants } from \"../../commons/new\";\n// Adding this for headless tests that are not triggering onLayout\nconst wasMeasuredDefaultValue = global._UILIB_TESTING ?? false;\nexport default function useHiddenLocation() {\n  const getHiddenLocation = ({\n    x = 0,\n    y = 0,\n    width = Constants.screenWidth,\n    height = Constants.windowHeight,\n    wasMeasured = wasMeasuredDefaultValue\n  }) => {\n    return {\n      up: -y - height,\n      down: Constants.windowHeight - y,\n      left: -width - x,\n      right: Constants.screenWidth - x,\n      wasMeasured\n    };\n  };\n  const [hiddenLocation, setHiddenLocation] = useState(getHiddenLocation({}));\n  const ref = useRef();\n  const layoutData = useRef();\n  const wasMeasured = useRef(wasMeasuredDefaultValue);\n  const measure = useCallback(() => {\n    if (ref.current && layoutData.current && layoutData.current.width > 0 && layoutData.current.height > 0) {\n      wasMeasured.current = true;\n      const {\n        x,\n        y,\n        width,\n        height\n      } = layoutData.current;\n      setHiddenLocation(getHiddenLocation({\n        x,\n        y,\n        width,\n        height,\n        wasMeasured: true\n      }));\n    }\n  }, []);\n  const setRef = useCallback(node => {\n    if (node) {\n      ref.current = node;\n      measure();\n    }\n  }, [measure]);\n  const onLayout = useCallback(event => {\n    if (!_isEqual(layoutData.current, event.nativeEvent.layout)) {\n      layoutData.current = event.nativeEvent.layout;\n      measure();\n    }\n  }, [measure]);\n  return {\n    setRef,\n    onLayout,\n    hiddenLocation\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}