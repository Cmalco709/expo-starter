{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"data\", \"onOrderChange\", \"enableHaptic\", \"scale\"];\nvar _jsxFileName = \"/workspaces/expo-starter/node_modules/react-native-ui-lib/src/components/sortableList/index.js\",\n  _this = this;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport _reduce from \"lodash/reduce\";\nimport _filter from \"lodash/filter\";\nimport _mapKeys from \"lodash/mapKeys\";\nimport _map from \"lodash/map\";\nimport React, { useMemo, useCallback } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { useSharedValue } from 'react-native-reanimated';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport SortableListContext from \"./SortableListContext\";\nimport SortableListItem from \"./SortableListItem\";\nimport { useDidUpdate, useThemeProps } from \"../../hooks\";\nimport { SortableListProps, SortableListItemProps } from \"./types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport { SortableListProps, SortableListItemProps };\nfunction generateItemsOrder(data) {\n  return _map(data, function (item) {\n    return item.id;\n  });\n}\nfunction generateLockedIds(data) {\n  return _reduce(_filter(data, function (item) {\n    return item.locked;\n  }), function (item, cur) {\n    return _objectSpread(_objectSpread({}, item), {}, _defineProperty({}, cur.id, true));\n  }, {});\n}\nvar SortableList = function SortableList(props) {\n  var themeProps = useThemeProps(props, 'SortableList');\n  var data = themeProps.data,\n    onOrderChange = themeProps.onOrderChange,\n    enableHaptic = themeProps.enableHaptic,\n    scale = themeProps.scale,\n    others = _objectWithoutProperties(themeProps, _excluded);\n  var itemsOrder = useSharedValue(generateItemsOrder(data));\n  var lockedIds = useSharedValue(generateLockedIds(data));\n  var itemHeight = useSharedValue(52);\n  useDidUpdate(function () {\n    itemsOrder.value = generateItemsOrder(data);\n  }, [data]);\n  var onChange = useCallback(function () {\n    var newData = [];\n    var dataByIds = _mapKeys(data, 'id');\n    if (data != null && data.length) {\n      itemsOrder.value.forEach(function (itemId) {\n        newData.push(dataByIds[itemId]);\n      });\n    }\n    onOrderChange == null ? void 0 : onOrderChange(newData);\n  }, [onOrderChange, data]);\n  var onItemLayout = useCallback(function (event) {\n    var newHeight = Math.round(event.nativeEvent.layout.height);\n    itemHeight.value = newHeight;\n  }, []);\n  var context = useMemo(function () {\n    return {\n      data: data,\n      itemsOrder: itemsOrder,\n      lockedIds: lockedIds,\n      onChange: onChange,\n      itemHeight: itemHeight,\n      onItemLayout: onItemLayout,\n      enableHaptic: enableHaptic,\n      scale: scale\n    };\n  }, [data]);\n  return _jsxDEV(GestureHandlerRootView, {\n    children: _jsxDEV(SortableListContext.Provider, {\n      value: context,\n      children: _jsxDEV(FlatList, _objectSpread(_objectSpread({}, others), {}, {\n        data: data,\n        CellRendererComponent: SortableListItem,\n        removeClippedSubviews: false\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 10\n  }, _this);\n};\nexport default SortableList;","map":{"version":3,"names":["_reduce","_filter","_mapKeys","_map","React","useMemo","useCallback","FlatList","useSharedValue","GestureHandlerRootView","SortableListContext","SortableListItem","useDidUpdate","useThemeProps","SortableListProps","SortableListItemProps","jsxDEV","_jsxDEV","generateItemsOrder","data","item","id","generateLockedIds","locked","cur","_objectSpread","_defineProperty","SortableList","props","themeProps","onOrderChange","enableHaptic","scale","others","_objectWithoutProperties","_excluded","itemsOrder","lockedIds","itemHeight","value","onChange","newData","dataByIds","length","forEach","itemId","push","onItemLayout","event","newHeight","Math","round","nativeEvent","layout","height","context","children","Provider","CellRendererComponent","removeClippedSubviews","fileName","_jsxFileName","lineNumber","columnNumber","_this"],"sources":["/workspaces/expo-starter/node_modules/react-native-ui-lib/src/components/sortableList/index.js"],"sourcesContent":["import _reduce from \"lodash/reduce\";\nimport _filter from \"lodash/filter\";\nimport _mapKeys from \"lodash/mapKeys\";\nimport _map from \"lodash/map\";\nimport React, { useMemo, useCallback } from 'react';\nimport { FlatList } from 'react-native';\nimport { useSharedValue } from 'react-native-reanimated';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport SortableListContext from \"./SortableListContext\";\nimport SortableListItem from \"./SortableListItem\";\nimport { useDidUpdate, useThemeProps } from \"../../hooks\";\nimport { SortableListProps, SortableListItemProps } from \"./types\";\nexport { SortableListProps, SortableListItemProps };\nfunction generateItemsOrder(data) {\n  return _map(data, item => item.id);\n}\nfunction generateLockedIds(data) {\n  return _reduce(_filter(data, item => item.locked), (item, cur) => ({\n    ...item,\n    [cur.id]: true\n  }), {});\n}\nconst SortableList = props => {\n  const themeProps = useThemeProps(props, 'SortableList');\n  const {\n    data,\n    onOrderChange,\n    enableHaptic,\n    scale,\n    ...others\n  } = themeProps;\n  const itemsOrder = useSharedValue(generateItemsOrder(data));\n  const lockedIds = useSharedValue(generateLockedIds(data));\n  const itemHeight = useSharedValue(52);\n  useDidUpdate(() => {\n    itemsOrder.value = generateItemsOrder(data);\n  }, [data]);\n  const onChange = useCallback(() => {\n    const newData = [];\n    const dataByIds = _mapKeys(data, 'id');\n    if (data?.length) {\n      itemsOrder.value.forEach(itemId => {\n        newData.push(dataByIds[itemId]);\n      });\n    }\n    onOrderChange?.(newData);\n  }, [onOrderChange, data]);\n  const onItemLayout = useCallback(event => {\n    // Round height for Android\n    const newHeight = Math.round(event.nativeEvent.layout.height);\n    itemHeight.value = newHeight;\n  }, []);\n  const context = useMemo(() => {\n    return {\n      data,\n      itemsOrder,\n      lockedIds,\n      onChange,\n      itemHeight,\n      onItemLayout,\n      enableHaptic,\n      scale\n    };\n  }, [data]);\n  return <GestureHandlerRootView>\n      <SortableListContext.Provider value={context}>\n        <FlatList {...others} data={data} CellRendererComponent={SortableListItem} removeClippedSubviews={false} // Workaround for crashing on Android (ArrayIndexOutOfBoundsException in ViewGroupDrawingOrderHelper.getChildDrawingOrder)\n      />\n      </SortableListContext.Provider>\n    </GestureHandlerRootView>;\n};\nexport default SortableList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}