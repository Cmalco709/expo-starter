{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"renderItem\", \"onOrderChange\"];\nvar _jsxFileName = \"/workspaces/expo-starter/node_modules/react-native-ui-lib/src/components/sortableGridList/index.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport _mapKeys from \"lodash/mapKeys\";\nimport _map from \"lodash/map\";\nimport React, { useCallback } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { useSharedValue } from 'react-native-reanimated';\nimport { useDidUpdate } from \"../../hooks\";\nimport SortableItem from \"./SortableItem\";\nimport usePresenter from \"./usePresenter\";\nimport { SortableGridListProps } from \"./types\";\nimport useGridLayout, { DEFAULT_ITEM_SPACINGS, DEFAULT_NUM_COLUMNS } from \"../gridList/useGridLayout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction generateItemsOrder(data) {\n  return _map(data, function (item) {\n    return item.id;\n  });\n}\nfunction SortableGridList(props) {\n  var _this = this;\n  var renderItem = props.renderItem,\n    onOrderChange = props.onOrderChange,\n    others = _objectWithoutProperties(props, _excluded);\n  var _useGridLayout = useGridLayout(props),\n    itemContainerStyle = _useGridLayout.itemContainerStyle,\n    numberOfColumns = _useGridLayout.numberOfColumns,\n    listContentStyle = _useGridLayout.listContentStyle;\n  var _others$numColumns = others.numColumns,\n    numColumns = _others$numColumns === void 0 ? DEFAULT_NUM_COLUMNS : _others$numColumns,\n    _others$itemSpacing = others.itemSpacing,\n    itemSpacing = _others$itemSpacing === void 0 ? DEFAULT_ITEM_SPACINGS : _others$itemSpacing,\n    data = others.data;\n  var itemsOrder = useSharedValue(generateItemsOrder(data));\n  useDidUpdate(function () {\n    itemsOrder.value = generateItemsOrder(data);\n  }, [data]);\n  var presenter = usePresenter(numColumns, itemSpacing);\n  var onChange = useCallback(function () {\n    var newData = [];\n    var dataByIds = _mapKeys(data, 'id');\n    if (data != null && data.length) {\n      itemsOrder.value.forEach(function (itemId) {\n        newData.push(dataByIds[itemId]);\n      });\n    }\n    onOrderChange == null ? void 0 : onOrderChange(newData, itemsOrder.value);\n  }, [onOrderChange, data]);\n  var _renderItem = useCallback(function (_ref) {\n    var item = _ref.item,\n      index = _ref.index;\n    var lastItemInRow = (index + 1) % numberOfColumns === 0;\n    return _jsxDEV(SortableItem, _objectSpread(_objectSpread({\n      data: data\n    }, presenter), {}, {\n      style: [itemContainerStyle, lastItemInRow && {\n        marginRight: 0\n      }],\n      itemsOrder: itemsOrder,\n      id: item.id,\n      onChange: onChange,\n      children: renderItem({\n        item: item,\n        index: index\n      })\n    }), item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 12\n    }, _this);\n  }, [data]);\n  return _jsxDEV(GestureHandlerRootView, {\n    children: _jsxDEV(ScrollView, {\n      contentContainerStyle: [styles.listContent, listContentStyle],\n      children: data == null ? void 0 : data.map(function (item, index) {\n        return _renderItem({\n          item: item,\n          index: index\n        });\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 10\n  }, this);\n}\nexport { SortableGridListProps };\nexport default SortableGridList;\nvar styles = StyleSheet.create({\n  listContent: {\n    flexWrap: 'wrap',\n    flexDirection: 'row'\n  }\n});","map":{"version":3,"names":["_mapKeys","_map","React","useCallback","StyleSheet","ScrollView","GestureHandlerRootView","useSharedValue","useDidUpdate","SortableItem","usePresenter","SortableGridListProps","useGridLayout","DEFAULT_ITEM_SPACINGS","DEFAULT_NUM_COLUMNS","jsxDEV","_jsxDEV","generateItemsOrder","data","item","id","SortableGridList","props","_this","renderItem","onOrderChange","others","_objectWithoutProperties","_excluded","_useGridLayout","itemContainerStyle","numberOfColumns","listContentStyle","_others$numColumns","numColumns","_others$itemSpacing","itemSpacing","itemsOrder","value","presenter","onChange","newData","dataByIds","length","forEach","itemId","push","_renderItem","_ref","index","lastItemInRow","_objectSpread","style","marginRight","children","fileName","_jsxFileName","lineNumber","columnNumber","contentContainerStyle","styles","listContent","map","create","flexWrap","flexDirection"],"sources":["/workspaces/expo-starter/node_modules/react-native-ui-lib/src/components/sortableGridList/index.js"],"sourcesContent":["import _mapKeys from \"lodash/mapKeys\";\nimport _map from \"lodash/map\";\nimport React, { useCallback } from 'react';\nimport { StyleSheet, ScrollView } from 'react-native';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { useSharedValue } from 'react-native-reanimated';\nimport { useDidUpdate } from \"../../hooks\";\nimport SortableItem from \"./SortableItem\";\nimport usePresenter from \"./usePresenter\";\nimport { SortableGridListProps } from \"./types\";\nimport useGridLayout, { DEFAULT_ITEM_SPACINGS, DEFAULT_NUM_COLUMNS } from \"../gridList/useGridLayout\";\nfunction generateItemsOrder(data) {\n  return _map(data, item => item.id);\n}\nfunction SortableGridList(props) {\n  const {\n    renderItem,\n    onOrderChange,\n    ...others\n  } = props;\n  const {\n    itemContainerStyle,\n    numberOfColumns,\n    listContentStyle\n  } = useGridLayout(props);\n  const {\n    numColumns = DEFAULT_NUM_COLUMNS,\n    itemSpacing = DEFAULT_ITEM_SPACINGS,\n    data\n  } = others;\n  const itemsOrder = useSharedValue(generateItemsOrder(data));\n  useDidUpdate(() => {\n    itemsOrder.value = generateItemsOrder(data);\n  }, [data]);\n\n  // TODO: Get the number of columns from GridList calculation somehow\n  const presenter = usePresenter(numColumns, itemSpacing);\n  const onChange = useCallback(() => {\n    const newData = [];\n    const dataByIds = _mapKeys(data, 'id');\n    if (data?.length) {\n      itemsOrder.value.forEach(itemId => {\n        newData.push(dataByIds[itemId]);\n      });\n    }\n    onOrderChange?.(newData, itemsOrder.value);\n  }, [onOrderChange, data]);\n  const _renderItem = useCallback(({\n    item,\n    index\n  }) => {\n    const lastItemInRow = (index + 1) % numberOfColumns === 0;\n    return <SortableItem key={item.id} data={data} {...presenter} style={[itemContainerStyle, lastItemInRow && {\n      marginRight: 0\n    }]} itemsOrder={itemsOrder} id={item.id} onChange={onChange}>\n        {/* @ts-expect-error */}\n        {renderItem({\n        item,\n        index\n      })}\n      </SortableItem>;\n  }, [data]);\n  return <GestureHandlerRootView>\n      <ScrollView contentContainerStyle={[styles.listContent, listContentStyle]}>\n        {data?.map((item, index) => _renderItem({\n        item,\n        index\n      }))}\n      </ScrollView>\n    </GestureHandlerRootView>;\n}\nexport { SortableGridListProps };\nexport default SortableGridList;\nconst styles = StyleSheet.create({\n  listContent: {\n    flexWrap: 'wrap',\n    flexDirection: 'row'\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}