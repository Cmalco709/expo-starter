{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _excluded = [\"size\", \"spacing\", \"color\", \"inactiveColor\"],\n  _excluded2 = [\"containerStyle\", \"animated\", \"horizontal\", \"animatedScrollOffset\"];\nvar _jsxFileName = \"/workspaces/expo-starter/node_modules/react-native-ui-lib/src/components/carousel/index.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport _times from \"lodash/times\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport React, { Component } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Colors } from \"../../style\";\nimport { asBaseComponent, Constants } from \"../../commons/new\";\nimport View from \"../view\";\nimport Text from \"../text\";\nimport PageControl from \"../pageControl\";\nimport * as presenter from \"./CarouselPresenter\";\nimport { CarouselProps, PageControlPosition } from \"./types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport { CarouselProps, PageControlPosition };\nvar Carousel = function (_Component) {\n  function Carousel(props) {\n    var _this$props5, _this$props5$animated, _this$props6, _this$props6$animated, _props$pageHeight;\n    var _this;\n    _classCallCheck(this, Carousel);\n    _this = _callSuper(this, Carousel, [props]);\n    _this.carousel = React.createRef();\n    _this.onOrientationChanged = function () {\n      var _this$props = _this.props,\n        pageWidth = _this$props.pageWidth,\n        loop = _this$props.loop;\n      if (!pageWidth || loop) {\n        _this.orientationChange = true;\n        _this.setState({\n          pageWidth: _this.state.containerWidth || Constants.screenWidth\n        });\n      }\n    };\n    _this.getContainerMarginHorizontal = function () {\n      var _this$props$container = _this.props.containerMarginHorizontal,\n        containerMarginHorizontal = _this$props$container === void 0 ? 0 : _this$props$container;\n      return containerMarginHorizontal;\n    };\n    _this.getContainerPaddingVertical = function () {\n      var _this$props$container2 = _this.props.containerPaddingVertical,\n        containerPaddingVertical = _this$props$container2 === void 0 ? 0 : _this$props$container2;\n      return containerPaddingVertical;\n    };\n    _this.updateOffset = function () {\n      var _this$carousel;\n      var animated = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var _presenter$calcOffset = presenter.calcOffset(_this.props, _this.state),\n        x = _presenter$calcOffset.x,\n        y = _presenter$calcOffset.y;\n      if ((_this$carousel = _this.carousel) != null && _this$carousel.current) {\n        _this.carousel.current.scrollTo({\n          x: x,\n          y: y,\n          animated: animated\n        });\n        if (Constants.isAndroid) {\n          _this.onMomentumScrollEnd();\n        }\n      }\n    };\n    _this.getSnapToOffsets = function () {\n      var _this$state = _this.state,\n        containerWidth = _this$state.containerWidth,\n        pageWidth = _this$state.pageWidth;\n      if (_this.shouldEnablePagination()) {\n        return undefined;\n      }\n      if (containerWidth) {\n        var spacings = pageWidth === containerWidth ? 0 : _this.getItemSpacings(_this.props);\n        var initialBreak = pageWidth - (containerWidth - pageWidth - spacings) / 2;\n        var snapToOffsets = _times(presenter.getChildrenLength(_this.props), function (index) {\n          return initialBreak + index * pageWidth + _this.getContainerMarginHorizontal();\n        });\n        return snapToOffsets;\n      }\n    };\n    _this.getInitialContentOffset = function (snapToOffsets) {\n      var _this$props2 = _this.props,\n        horizontal = _this$props2.horizontal,\n        initialPage = _this$props2.initialPage;\n      var initialOffset = _this.state.initialOffset;\n      var contentOffset = initialOffset;\n      if (snapToOffsets && initialPage !== undefined) {\n        var offset = initialPage === 0 ? 0 : snapToOffsets[initialPage - 1];\n        contentOffset = {\n          x: horizontal ? offset : 0,\n          y: horizontal ? 0 : offset\n        };\n      }\n      return contentOffset;\n    };\n    _this.onContentSizeChange = function () {\n      if (Constants.isAndroid) {\n        _this.updateOffset();\n      }\n    };\n    _this.onContainerLayout = function (_ref) {\n      var _ref$nativeEvent$layo = _ref.nativeEvent.layout,\n        containerWidth = _ref$nativeEvent$layo.width,\n        containerHeight = _ref$nativeEvent$layo.height;\n      var _this$props3 = _this.props,\n        _this$props3$pageWidt = _this$props3.pageWidth,\n        pageWidth = _this$props3$pageWidt === void 0 ? containerWidth : _this$props3$pageWidt,\n        _this$props3$pageHeig = _this$props3.pageHeight,\n        pageHeight = _this$props3$pageHeig === void 0 ? containerHeight : _this$props3$pageHeig,\n        horizontal = _this$props3.horizontal;\n      var initialOffset = presenter.calcOffset(_this.props, {\n        currentPage: _this.state.currentPage,\n        pageWidth: pageWidth,\n        pageHeight: pageHeight\n      });\n      if (horizontal && containerWidth || !horizontal && containerHeight) {\n        _this.setState({\n          containerWidth: containerWidth,\n          pageWidth: pageWidth,\n          pageHeight: pageHeight,\n          initialOffset: initialOffset\n        });\n      }\n    };\n    _this.onMomentumScrollEnd = function () {\n      var _this$state2 = _this.state,\n        currentStandingPage = _this$state2.currentStandingPage,\n        currentPage = _this$state2.currentPage;\n      var index = _this.getCalcIndex(currentPage);\n      var pagesCount = presenter.getChildrenLength(_this.props);\n      if (index < pagesCount) {\n        _this.setState({\n          currentStandingPage: index\n        });\n        if (currentStandingPage !== index) {\n          _this.props.onChangePage == null ? void 0 : _this.props.onChangePage(index, currentStandingPage, {\n            isAutoScrolled: _this.isAutoScrolled\n          });\n          _this.isAutoScrolled = false;\n        }\n      }\n    };\n    _this.onScroll = function (event) {\n      if (!_this.skippedInitialScroll) {\n        _this.skippedInitialScroll = true;\n        return;\n      }\n      var _this$props4 = _this.props,\n        loop = _this$props4.loop,\n        autoplay = _this$props4.autoplay,\n        horizontal = _this$props4.horizontal;\n      var _this$state3 = _this.state,\n        pageWidth = _this$state3.pageWidth,\n        pageHeight = _this$state3.pageHeight;\n      var offsetX = event.nativeEvent.contentOffset.x;\n      var offsetY = event.nativeEvent.contentOffset.y;\n      var offset = horizontal ? offsetX : offsetY;\n      var pageSize = horizontal ? pageWidth : pageHeight;\n      if (offset >= 0) {\n        if (!_this.orientationChange) {\n          var newPage = presenter.calcPageIndex(offset, _this.props, pageSize);\n          _this.setState({\n            currentPage: newPage\n          });\n        }\n        _this.orientationChange = false;\n      }\n      if (loop && presenter.isOutOfBounds(offsetX, _this.props, pageWidth)) {\n        _this.updateOffset();\n      }\n      if (autoplay) {\n        _this.resetAutoPlay();\n      }\n      _this.props.onScroll == null ? void 0 : _this.props.onScroll(event);\n    };\n    _this.onScrollEvent = Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          y: (_this$props5 = _this.props) == null ? void 0 : (_this$props5$animated = _this$props5.animatedScrollOffset) == null ? void 0 : _this$props5$animated.y,\n          x: (_this$props6 = _this.props) == null ? void 0 : (_this$props6$animated = _this$props6.animatedScrollOffset) == null ? void 0 : _this$props6$animated.x\n        }\n      }\n    }], {\n      useNativeDriver: true,\n      listener: _this.onScroll\n    });\n    _this.renderChild = function (child, key) {\n      if (child) {\n        var _this$state4 = _this.state,\n          pageWidth = _this$state4.pageWidth,\n          pageHeight = _this$state4.pageHeight;\n        var horizontal = _this.props.horizontal;\n        var paddingLeft = horizontal ? _this.shouldUsePageWidth() ? _this.getItemSpacings(_this.props) : undefined : 0;\n        var index = Number(key);\n        var length = presenter.getChildrenLength(_this.props);\n        var containerMarginHorizontal = _this.getContainerMarginHorizontal();\n        var marginLeft = index === 0 ? containerMarginHorizontal : 0;\n        var marginRight = index === length - 1 ? containerMarginHorizontal : 0;\n        var paddingVertical = _this.getContainerPaddingVertical();\n        return _jsxDEV(View, {\n          style: {\n            width: pageWidth,\n            height: !horizontal ? pageHeight : undefined,\n            paddingLeft: paddingLeft,\n            marginLeft: marginLeft,\n            marginRight: marginRight,\n            paddingVertical: paddingVertical\n          },\n          collapsable: false,\n          children: [_this.shouldAllowAccessibilityLayout() && !Number.isNaN(index) && _jsxDEV(View, {\n            style: styles.hiddenText,\n            children: _jsxDEV(Text, {\n              children: `page ${index + 1} out of ${length}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 77\n          }, _this), child]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 14\n        }, _this);\n      }\n    };\n    var defaultPageWidth = props.loop || !props.pageWidth ? Constants.screenWidth : props.pageWidth;\n    var _pageHeight = (_props$pageHeight = props.pageHeight) != null ? _props$pageHeight : Constants.screenHeight;\n    _this.isAutoScrolled = false;\n    _this.state = {\n      containerWidth: undefined,\n      currentPage: _this.shouldUsePageWidth() ? _this.getCalcIndex(props.initialPage) : props.initialPage,\n      currentStandingPage: props.initialPage || 0,\n      pageWidth: defaultPageWidth,\n      pageHeight: _pageHeight,\n      initialOffset: presenter.calcOffset(props, {\n        currentPage: props.initialPage,\n        pageWidth: defaultPageWidth,\n        pageHeight: _pageHeight\n      }),\n      prevProps: props\n    };\n    return _this;\n  }\n  _inherits(Carousel, _Component);\n  return _createClass(Carousel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.dimensionsChangeListener = Constants.addDimensionsEventListener(this.onOrientationChanged);\n      if (this.props.autoplay) {\n        this.startAutoPlay();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Constants.removeDimensionsEventListener(this.dimensionsChangeListener || this.onOrientationChanged);\n      if (this.autoplayTimer) {\n        clearInterval(this.autoplayTimer);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var autoplay = this.props.autoplay;\n      if (autoplay && !prevProps.autoplay) {\n        this.startAutoPlay();\n      } else if (!autoplay && prevProps.autoplay) {\n        this.stopAutoPlay();\n      }\n    }\n  }, {\n    key: \"getItemSpacings\",\n    value: function getItemSpacings(props) {\n      var _props$itemSpacings = props.itemSpacings,\n        itemSpacings = _props$itemSpacings === void 0 ? 16 : _props$itemSpacings;\n      return itemSpacings;\n    }\n  }, {\n    key: \"startAutoPlay\",\n    value: function startAutoPlay() {\n      var _this2 = this;\n      this.autoplayTimer = setInterval(function () {\n        _this2.isAutoScrolled = true;\n        _this2.goToNextPage();\n      }, this.props.autoplayInterval);\n    }\n  }, {\n    key: \"stopAutoPlay\",\n    value: function stopAutoPlay() {\n      if (this.autoplayTimer) {\n        clearInterval(this.autoplayTimer);\n      }\n    }\n  }, {\n    key: \"resetAutoPlay\",\n    value: function resetAutoPlay() {\n      this.stopAutoPlay();\n      this.startAutoPlay();\n    }\n  }, {\n    key: \"goToPage\",\n    value: function goToPage(pageIndex) {\n      var _this3 = this;\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this.setState({\n        currentPage: this.getCalcIndex(pageIndex)\n      }, function () {\n        return _this3.updateOffset(animated);\n      });\n    }\n  }, {\n    key: \"goToNextPage\",\n    value: function goToNextPage() {\n      var currentPage = this.state.currentPage;\n      var pagesCount = presenter.getChildrenLength(this.props);\n      var loop = this.props.loop;\n      var nextPageIndex;\n      if (loop) {\n        nextPageIndex = currentPage + 1;\n      } else {\n        nextPageIndex = Math.min(pagesCount - 1, currentPage + 1);\n      }\n      this.goToPage(nextPageIndex, true);\n      if (loop && currentPage === pagesCount) {\n        this.goToPage(0, false);\n      }\n    }\n  }, {\n    key: \"getCalcIndex\",\n    value: function getCalcIndex(index) {\n      if (Constants.isRTL && Constants.isAndroid) {\n        var length = presenter.getChildrenLength(this.props) - 1;\n        return length - index;\n      }\n      return index;\n    }\n  }, {\n    key: \"shouldUsePageWidth\",\n    value: function shouldUsePageWidth() {\n      var _this$props7 = this.props,\n        loop = _this$props7.loop,\n        pageWidth = _this$props7.pageWidth;\n      return !loop && pageWidth;\n    }\n  }, {\n    key: \"shouldEnablePagination\",\n    value: function shouldEnablePagination() {\n      var _this$props8 = this.props,\n        pagingEnabled = _this$props8.pagingEnabled,\n        horizontal = _this$props8.horizontal;\n      return horizontal ? pagingEnabled && !this.shouldUsePageWidth() : true;\n    }\n  }, {\n    key: \"shouldAllowAccessibilityLayout\",\n    value: function shouldAllowAccessibilityLayout() {\n      var allowAccessibleLayout = this.props.allowAccessibleLayout;\n      return allowAccessibleLayout && Constants.accessibility.isScreenReaderEnabled;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren() {\n      var _this4 = this;\n      var _this$props9 = this.props,\n        children = _this$props9.children,\n        loop = _this$props9.loop;\n      var length = presenter.getChildrenLength(this.props);\n      var childrenArray = React.Children.map(children, function (child, index) {\n        return _this4.renderChild(child, `${index}`);\n      });\n      if (loop && childrenArray) {\n        childrenArray.unshift(this.renderChild(children[length - 1], `${length - 1}-clone`));\n        childrenArray.push(this.renderChild(children[0], `${0}-clone`));\n      }\n      return childrenArray;\n    }\n  }, {\n    key: \"renderPageControl\",\n    value: function renderPageControl() {\n      var _this$props10 = this.props,\n        pageControlPosition = _this$props10.pageControlPosition,\n        _this$props10$pageCon = _this$props10.pageControlProps,\n        pageControlProps = _this$props10$pageCon === void 0 ? {} : _this$props10$pageCon;\n      if (pageControlPosition) {\n        var _pageControlProps$siz = pageControlProps.size,\n          size = _pageControlProps$siz === void 0 ? 6 : _pageControlProps$siz,\n          _pageControlProps$spa = pageControlProps.spacing,\n          spacing = _pageControlProps$spa === void 0 ? 8 : _pageControlProps$spa,\n          _pageControlProps$col = pageControlProps.color,\n          color = _pageControlProps$col === void 0 ? Colors.$backgroundNeutralHeavy : _pageControlProps$col,\n          _pageControlProps$ina = pageControlProps.inactiveColor,\n          inactiveColor = _pageControlProps$ina === void 0 ? Colors.$backgroundDisabled : _pageControlProps$ina,\n          others = _objectWithoutProperties(pageControlProps, _excluded);\n        var pagesCount = presenter.getChildrenLength(this.props);\n        var containerStyle = pageControlPosition === PageControlPosition.UNDER ? {\n          marginVertical: 16 - this.getContainerPaddingVertical()\n        } : styles.pageControlContainerStyle;\n        return _jsxDEV(PageControl, _objectSpread(_objectSpread({\n          size: size,\n          spacing: spacing,\n          containerStyle: containerStyle,\n          inactiveColor: inactiveColor,\n          color: color\n        }, others), {}, {\n          numOfPages: pagesCount,\n          currentPage: this.getCalcIndex(this.state.currentPage)\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 14\n        }, this);\n      }\n    }\n  }, {\n    key: \"renderCounter\",\n    value: function renderCounter() {\n      var _this$props11 = this.props,\n        pageWidth = _this$props11.pageWidth,\n        showCounter = _this$props11.showCounter,\n        counterTextStyle = _this$props11.counterTextStyle;\n      var currentStandingPage = this.state.currentStandingPage;\n      var pagesCount = presenter.getChildrenLength(this.props);\n      if (showCounter && !pageWidth) {\n        return _jsxDEV(View, {\n          center: true,\n          style: styles.counter,\n          children: _jsxDEV(Text, {\n            grey80: true,\n            text90: true,\n            style: [{\n              fontWeight: 'bold'\n            }, counterTextStyle],\n            children: [currentStandingPage + 1, \"/\", pagesCount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 14\n        }, this);\n      }\n    }\n  }, {\n    key: \"renderAccessibleLayout\",\n    value: function renderAccessibleLayout() {\n      var _this5 = this;\n      var _this$props12 = this.props,\n        containerStyle = _this$props12.containerStyle,\n        children = _this$props12.children,\n        testID = _this$props12.testID;\n      return _jsxDEV(View, {\n        style: containerStyle,\n        onLayout: this.onContainerLayout,\n        children: _jsxDEV(ScrollView, {\n          testID: testID,\n          ref: this.carousel,\n          showsVerticalScrollIndicator: false,\n          pagingEnabled: true,\n          onContentSizeChange: this.onContentSizeChange,\n          onScroll: this.onScroll,\n          onMomentumScrollEnd: this.onMomentumScrollEnd,\n          children: React.Children.map(children, function (child, index) {\n            return _this5.renderChild(child, `${index}`);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 12\n      }, this);\n    }\n  }, {\n    key: \"renderCarousel\",\n    value: function renderCarousel() {\n      var _this$props13 = this.props,\n        containerStyle = _this$props13.containerStyle,\n        animated = _this$props13.animated,\n        horizontal = _this$props13.horizontal,\n        animatedScrollOffset = _this$props13.animatedScrollOffset,\n        others = _objectWithoutProperties(_this$props13, _excluded2);\n      var scrollContainerStyle = this.shouldUsePageWidth() ? {\n        paddingRight: this.getItemSpacings(this.props)\n      } : undefined;\n      var snapToOffsets = this.getSnapToOffsets();\n      var marginBottom = Math.max(0, this.getContainerPaddingVertical() - 16);\n      var ScrollContainer = animatedScrollOffset ? Animated.ScrollView : ScrollView;\n      var contentOffset = this.getInitialContentOffset(snapToOffsets);\n      return _jsxDEV(View, {\n        animated: animated,\n        style: [{\n          marginBottom: marginBottom\n        }, containerStyle],\n        onLayout: this.onContainerLayout,\n        children: [_jsxDEV(ScrollContainer, _objectSpread(_objectSpread({\n          showsHorizontalScrollIndicator: false,\n          showsVerticalScrollIndicator: false,\n          decelerationRate: \"fast\",\n          scrollEventThrottle: 200\n        }, others), {}, {\n          ref: this.carousel,\n          onScroll: animatedScrollOffset ? this.onScrollEvent : this.onScroll,\n          contentContainerStyle: scrollContainerStyle,\n          horizontal: horizontal,\n          pagingEnabled: this.shouldEnablePagination(),\n          snapToOffsets: snapToOffsets,\n          contentOffset: contentOffset,\n          onMomentumScrollEnd: this.onMomentumScrollEnd,\n          children: this.renderChildren()\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 9\n        }, this), this.renderPageControl(), this.renderCounter()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 12\n      }, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.shouldAllowAccessibilityLayout() ? this.renderAccessibleLayout() : this.renderCarousel();\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var currentPage = prevState.currentPage,\n        prevProps = prevState.prevProps;\n      var pageWidth = prevProps.pageWidth,\n        pageHeight = prevProps.pageHeight;\n      var nextPageWidth = nextProps.pageWidth,\n        nextPageHeight = nextProps.pageHeight;\n      if (!_isUndefined(nextPageWidth) && pageWidth !== nextPageWidth || !_isUndefined(nextPageHeight) && pageHeight !== nextPageHeight) {\n        var _pageWidth = nextPageWidth;\n        var _pageHeight2 = nextPageHeight;\n        return {\n          pageWidth: _pageWidth,\n          initialOffset: presenter.calcOffset(prevProps, {\n            currentPage: currentPage,\n            pageWidth: _pageWidth,\n            pageHeight: _pageHeight2\n          }),\n          prevProps: nextProps\n        };\n      }\n      if (prevProps.containerMarginHorizontal !== nextProps.containerMarginHorizontal || prevProps.loop !== nextProps.loop) {\n        return {\n          prevProps: nextProps\n        };\n      }\n      return null;\n    }\n  }]);\n}(Component);\nCarousel.displayName = 'Carousel';\nCarousel.defaultProps = {\n  initialPage: 0,\n  pagingEnabled: true,\n  autoplay: false,\n  autoplayInterval: 4000,\n  horizontal: true\n};\nCarousel.pageControlPositions = PageControlPosition;\nexport { Carousel };\nexport default asBaseComponent(Carousel);\nvar styles = StyleSheet.create({\n  counter: {\n    paddingHorizontal: 8,\n    paddingVertical: 3,\n    borderRadius: 20,\n    backgroundColor: Colors.rgba(Colors.black, 0.6),\n    position: 'absolute',\n    top: 12,\n    right: 12\n  },\n  pageControlContainerStyle: {\n    position: 'absolute',\n    bottom: 16,\n    alignSelf: 'center'\n  },\n  hiddenText: {\n    position: 'absolute',\n    width: 1\n  }\n});","map":{"version":3,"names":["_times","_isUndefined","React","Component","Animated","ScrollView","StyleSheet","Colors","asBaseComponent","Constants","View","Text","PageControl","presenter","CarouselProps","PageControlPosition","jsxDEV","_jsxDEV","Carousel","_Component","props","_this$props5","_this$props5$animated","_this$props6","_this$props6$animated","_props$pageHeight","_this","_classCallCheck","_callSuper","carousel","createRef","onOrientationChanged","_this$props","pageWidth","loop","orientationChange","setState","state","containerWidth","screenWidth","getContainerMarginHorizontal","_this$props$container","containerMarginHorizontal","getContainerPaddingVertical","_this$props$container2","containerPaddingVertical","updateOffset","_this$carousel","animated","arguments","length","undefined","_presenter$calcOffset","calcOffset","x","y","current","scrollTo","isAndroid","onMomentumScrollEnd","getSnapToOffsets","_this$state","shouldEnablePagination","spacings","getItemSpacings","initialBreak","snapToOffsets","getChildrenLength","index","getInitialContentOffset","_this$props2","horizontal","initialPage","initialOffset","contentOffset","offset","onContentSizeChange","onContainerLayout","_ref","_ref$nativeEvent$layo","nativeEvent","layout","width","containerHeight","height","_this$props3","_this$props3$pageWidt","_this$props3$pageHeig","pageHeight","currentPage","_this$state2","currentStandingPage","getCalcIndex","pagesCount","onChangePage","isAutoScrolled","onScroll","event","skippedInitialScroll","_this$props4","autoplay","_this$state3","offsetX","offsetY","pageSize","newPage","calcPageIndex","isOutOfBounds","resetAutoPlay","onScrollEvent","animatedScrollOffset","useNativeDriver","listener","renderChild","child","key","_this$state4","paddingLeft","shouldUsePageWidth","Number","marginLeft","marginRight","paddingVertical","style","collapsable","children","shouldAllowAccessibilityLayout","isNaN","styles","hiddenText","fileName","_jsxFileName","lineNumber","columnNumber","defaultPageWidth","screenHeight","prevProps","_inherits","_createClass","value","componentDidMount","dimensionsChangeListener","addDimensionsEventListener","startAutoPlay","componentWillUnmount","removeDimensionsEventListener","autoplayTimer","clearInterval","componentDidUpdate","stopAutoPlay","_props$itemSpacings","itemSpacings","_this2","setInterval","goToNextPage","autoplayInterval","goToPage","pageIndex","_this3","nextPageIndex","Math","min","isRTL","_this$props7","_this$props8","pagingEnabled","allowAccessibleLayout","accessibility","isScreenReaderEnabled","renderChildren","_this4","_this$props9","childrenArray","Children","map","unshift","push","renderPageControl","_this$props10","pageControlPosition","_this$props10$pageCon","pageControlProps","_pageControlProps$siz","size","_pageControlProps$spa","spacing","_pageControlProps$col","color","$backgroundNeutralHeavy","_pageControlProps$ina","inactiveColor","$backgroundDisabled","others","_objectWithoutProperties","_excluded","containerStyle","UNDER","marginVertical","pageControlContainerStyle","_objectSpread","numOfPages","renderCounter","_this$props11","showCounter","counterTextStyle","center","counter","grey80","text90","fontWeight","renderAccessibleLayout","_this5","_this$props12","testID","onLayout","ref","showsVerticalScrollIndicator","renderCarousel","_this$props13","_excluded2","scrollContainerStyle","paddingRight","marginBottom","max","ScrollContainer","showsHorizontalScrollIndicator","decelerationRate","scrollEventThrottle","contentContainerStyle","render","getDerivedStateFromProps","nextProps","prevState","nextPageWidth","nextPageHeight","displayName","defaultProps","pageControlPositions","create","paddingHorizontal","borderRadius","backgroundColor","rgba","black","position","top","right","bottom","alignSelf"],"sources":["/workspaces/expo-starter/node_modules/react-native-ui-lib/src/components/carousel/index.js"],"sourcesContent":["import _times from \"lodash/times\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport React, { Component } from 'react';\nimport { Animated, ScrollView, StyleSheet } from 'react-native';\nimport { Colors } from \"../../style\";\nimport { asBaseComponent, Constants } from \"../../commons/new\";\nimport View from \"../view\";\nimport Text from \"../text\";\nimport PageControl from \"../pageControl\";\nimport * as presenter from \"./CarouselPresenter\";\nimport { CarouselProps, PageControlPosition } from \"./types\";\nexport { CarouselProps, PageControlPosition };\n/**\n * @description: Carousel for scrolling pages horizontally\n * @gif: https://user-images.githubusercontent.com/1780255/107120258-40b5bc80-6895-11eb-9596-8065d3a940ff.gif, https://user-images.githubusercontent.com/1780255/107120257-3eebf900-6895-11eb-9800-402e9e0dc692.gif\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/CarouselScreen.tsx\n * @extends: ScrollView\n * @extendsLink: https://reactnative.dev/docs/scrollview\n * @notes: This is a screen width Component\n */\nclass Carousel extends Component {\n  static displayName = 'Carousel';\n  static defaultProps = {\n    initialPage: 0,\n    pagingEnabled: true,\n    autoplay: false,\n    autoplayInterval: 4000,\n    horizontal: true\n  };\n  static pageControlPositions = PageControlPosition;\n  carousel = React.createRef();\n  constructor(props) {\n    super(props);\n    const defaultPageWidth = props.loop || !props.pageWidth ? Constants.screenWidth : props.pageWidth;\n    const pageHeight = props.pageHeight ?? Constants.screenHeight;\n    this.isAutoScrolled = false;\n    this.state = {\n      containerWidth: undefined,\n      // @ts-ignore (defaultProps)\n      currentPage: this.shouldUsePageWidth() ? this.getCalcIndex(props.initialPage) : props.initialPage,\n      currentStandingPage: props.initialPage || 0,\n      pageWidth: defaultPageWidth,\n      pageHeight,\n      initialOffset: presenter.calcOffset(props, {\n        // @ts-ignore (defaultProps)\n        currentPage: props.initialPage,\n        pageWidth: defaultPageWidth,\n        pageHeight\n      }),\n      prevProps: props\n    };\n  }\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const {\n      currentPage,\n      prevProps\n    } = prevState;\n    const {\n      pageWidth,\n      pageHeight\n    } = prevProps;\n    const {\n      pageWidth: nextPageWidth,\n      pageHeight: nextPageHeight\n    } = nextProps;\n    if (!_isUndefined(nextPageWidth) && pageWidth !== nextPageWidth || !_isUndefined(nextPageHeight) && pageHeight !== nextPageHeight) {\n      const pageWidth = nextPageWidth;\n      const pageHeight = nextPageHeight;\n      return {\n        pageWidth,\n        initialOffset: presenter.calcOffset(prevProps, {\n          currentPage,\n          pageWidth,\n          pageHeight\n        }),\n        prevProps: nextProps\n      };\n    }\n\n    // for presenter.calcOffset() props parameter\n    if (prevProps.containerMarginHorizontal !== nextProps.containerMarginHorizontal || prevProps.loop !== nextProps.loop) {\n      return {\n        prevProps: nextProps\n      };\n    }\n    return null;\n  }\n  componentDidMount() {\n    this.dimensionsChangeListener = Constants.addDimensionsEventListener(this.onOrientationChanged);\n    if (this.props.autoplay) {\n      this.startAutoPlay();\n    }\n  }\n  componentWillUnmount() {\n    Constants.removeDimensionsEventListener(this.dimensionsChangeListener || this.onOrientationChanged);\n    if (this.autoplayTimer) {\n      clearInterval(this.autoplayTimer);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      autoplay\n    } = this.props;\n    if (autoplay && !prevProps.autoplay) {\n      this.startAutoPlay();\n    } else if (!autoplay && prevProps.autoplay) {\n      this.stopAutoPlay();\n    }\n  }\n  onOrientationChanged = () => {\n    const {\n      pageWidth,\n      loop\n    } = this.props;\n    if (!pageWidth || loop) {\n      this.orientationChange = true;\n      // HACK: setting to containerWidth for Android's call when view disappear\n      this.setState({\n        pageWidth: this.state.containerWidth || Constants.screenWidth\n      });\n    }\n  };\n  getItemSpacings(props) {\n    const {\n      itemSpacings = 16\n    } = props;\n    return itemSpacings;\n  }\n  getContainerMarginHorizontal = () => {\n    const {\n      containerMarginHorizontal = 0\n    } = this.props;\n    return containerMarginHorizontal;\n  };\n\n  // TODO: RN 61.5 - try to remove this from the children and move to the ScrollView's contentContainerStyle\n  // style={{overflow: 'visible'}} does not work in ScrollView on Android, maybe it will be fixed in the future\n  getContainerPaddingVertical = () => {\n    const {\n      containerPaddingVertical = 0\n    } = this.props;\n    return containerPaddingVertical;\n  };\n  updateOffset = (animated = false) => {\n    const {\n      x,\n      y\n    } = presenter.calcOffset(this.props, this.state);\n    if (this.carousel?.current) {\n      this.carousel.current.scrollTo({\n        x,\n        y,\n        animated\n      });\n      if (Constants.isAndroid) {\n        // this is done to handle onMomentumScrollEnd not being called in Android:\n        // https://github.com/facebook/react-native/issues/11693\n        // https://github.com/facebook/react-native/issues/19246\n        this.onMomentumScrollEnd();\n      }\n    }\n  };\n  startAutoPlay() {\n    this.autoplayTimer = setInterval(() => {\n      this.isAutoScrolled = true;\n      this.goToNextPage();\n    }, this.props.autoplayInterval);\n  }\n  stopAutoPlay() {\n    if (this.autoplayTimer) {\n      clearInterval(this.autoplayTimer);\n    }\n  }\n  resetAutoPlay() {\n    this.stopAutoPlay();\n    this.startAutoPlay();\n  }\n  goToPage(pageIndex, animated = true) {\n    this.setState({\n      currentPage: this.getCalcIndex(pageIndex)\n    }, () => this.updateOffset(animated));\n  }\n  goToNextPage() {\n    const {\n      currentPage\n    } = this.state;\n    const pagesCount = presenter.getChildrenLength(this.props);\n    const {\n      loop\n    } = this.props;\n    let nextPageIndex;\n    if (loop) {\n      nextPageIndex = currentPage + 1;\n    } else {\n      nextPageIndex = Math.min(pagesCount - 1, currentPage + 1);\n    }\n    this.goToPage(nextPageIndex, true);\n\n    // in case of a loop, after we advanced right to the cloned first page,\n    // we return silently to the real first page\n    if (loop && currentPage === pagesCount) {\n      this.goToPage(0, false);\n    }\n  }\n  getCalcIndex(index) {\n    // to handle scrollView index issue in Android's RTL layout\n    if (Constants.isRTL && Constants.isAndroid) {\n      const length = presenter.getChildrenLength(this.props) - 1;\n      return length - index;\n    }\n    return index;\n  }\n\n  // TODO: currently this returns pagesCount offsets, not starting from 0; look into changing this into (pagesCount - 1) or to have the 1st item as 0\n  getSnapToOffsets = () => {\n    const {\n      containerWidth,\n      pageWidth\n    } = this.state;\n    if (this.shouldEnablePagination()) {\n      return undefined;\n    }\n    if (containerWidth) {\n      const spacings = pageWidth === containerWidth ? 0 : this.getItemSpacings(this.props);\n      const initialBreak = pageWidth - (containerWidth - pageWidth - spacings) / 2;\n      const snapToOffsets = _times(presenter.getChildrenLength(this.props), index => initialBreak + index * pageWidth + this.getContainerMarginHorizontal());\n      return snapToOffsets;\n    }\n  };\n  getInitialContentOffset = snapToOffsets => {\n    const {\n      horizontal,\n      initialPage\n    } = this.props;\n    const {\n      initialOffset\n    } = this.state;\n    let contentOffset = initialOffset;\n    if (snapToOffsets && initialPage !== undefined) {\n      const offset = initialPage === 0 ? 0 : snapToOffsets[initialPage - 1];\n      contentOffset = {\n        x: horizontal ? offset : 0,\n        y: horizontal ? 0 : offset\n      };\n    }\n    return contentOffset;\n  };\n  shouldUsePageWidth() {\n    const {\n      loop,\n      pageWidth\n    } = this.props;\n    return !loop && pageWidth;\n  }\n  shouldEnablePagination() {\n    const {\n      pagingEnabled,\n      horizontal\n    } = this.props;\n    return horizontal ? pagingEnabled && !this.shouldUsePageWidth() : true;\n  }\n  shouldAllowAccessibilityLayout() {\n    const {\n      allowAccessibleLayout\n    } = this.props;\n    return allowAccessibleLayout && Constants.accessibility.isScreenReaderEnabled;\n  }\n  onContentSizeChange = () => {\n    // this is to handle initial scroll position (content offset)\n    if (Constants.isAndroid) {\n      this.updateOffset();\n    }\n  };\n  onContainerLayout = ({\n    nativeEvent: {\n      layout: {\n        width: containerWidth,\n        height: containerHeight\n      }\n    }\n  }) => {\n    const {\n      pageWidth = containerWidth,\n      pageHeight = containerHeight,\n      horizontal\n    } = this.props;\n    const initialOffset = presenter.calcOffset(this.props, {\n      currentPage: this.state.currentPage,\n      pageWidth,\n      pageHeight\n    });\n\n    // NOTE: This is to avoid resetting containerWidth to 0 - an issue that happens\n    // on Android in some case when onLayout is re-triggered\n    if (horizontal && containerWidth || !horizontal && containerHeight) {\n      this.setState({\n        containerWidth,\n        pageWidth,\n        pageHeight,\n        initialOffset\n      });\n    }\n  };\n  onMomentumScrollEnd = () => {\n    // finished full page scroll\n    const {\n      currentStandingPage,\n      currentPage\n    } = this.state;\n    const index = this.getCalcIndex(currentPage);\n    const pagesCount = presenter.getChildrenLength(this.props);\n    if (index < pagesCount) {\n      this.setState({\n        currentStandingPage: index\n      });\n      if (currentStandingPage !== index) {\n        this.props.onChangePage?.(index, currentStandingPage, {\n          isAutoScrolled: this.isAutoScrolled\n        });\n        this.isAutoScrolled = false;\n      }\n    }\n  };\n  onScroll = event => {\n    if (!this.skippedInitialScroll) {\n      this.skippedInitialScroll = true;\n      return;\n    }\n    const {\n      loop,\n      autoplay,\n      horizontal\n    } = this.props;\n    const {\n      pageWidth,\n      pageHeight\n    } = this.state;\n    const offsetX = event.nativeEvent.contentOffset.x;\n    const offsetY = event.nativeEvent.contentOffset.y;\n    const offset = horizontal ? offsetX : offsetY;\n    const pageSize = horizontal ? pageWidth : pageHeight;\n    if (offset >= 0) {\n      if (!this.orientationChange) {\n        // Avoid new calculation on orientation change\n        const newPage = presenter.calcPageIndex(offset, this.props, pageSize);\n        this.setState({\n          currentPage: newPage\n        });\n      }\n      this.orientationChange = false;\n    }\n    if (loop && presenter.isOutOfBounds(offsetX, this.props, pageWidth)) {\n      this.updateOffset();\n    }\n    if (autoplay) {\n      // reset the timer to avoid auto scroll immediately after manual one\n      this.resetAutoPlay();\n    }\n    this.props.onScroll?.(event);\n  };\n  onScrollEvent = Animated.event([{\n    nativeEvent: {\n      contentOffset:\n      // @ts-ignore\n      {\n        y: this.props?.animatedScrollOffset?.y,\n        x: this.props?.animatedScrollOffset?.x\n      }\n    }\n  }], {\n    useNativeDriver: true,\n    listener: this.onScroll\n  });\n  renderChild = (child, key) => {\n    if (child) {\n      const {\n        pageWidth,\n        pageHeight\n      } = this.state;\n      const {\n        horizontal\n      } = this.props;\n      const paddingLeft = horizontal ? this.shouldUsePageWidth() ? this.getItemSpacings(this.props) : undefined : 0;\n      const index = Number(key);\n      const length = presenter.getChildrenLength(this.props);\n      const containerMarginHorizontal = this.getContainerMarginHorizontal();\n      const marginLeft = index === 0 ? containerMarginHorizontal : 0;\n      const marginRight = index === length - 1 ? containerMarginHorizontal : 0;\n      const paddingVertical = this.getContainerPaddingVertical();\n      return <View style={{\n        width: pageWidth,\n        height: !horizontal ? pageHeight : undefined,\n        paddingLeft,\n        marginLeft,\n        marginRight,\n        paddingVertical\n      }} key={key} collapsable={false}>\n          {this.shouldAllowAccessibilityLayout() && !Number.isNaN(index) && <View style={styles.hiddenText}>\n              <Text>{`page ${index + 1} out of ${length}`}</Text>\n            </View>}\n          {child}\n        </View>;\n    }\n  };\n  renderChildren() {\n    const {\n      children,\n      loop\n    } = this.props;\n    const length = presenter.getChildrenLength(this.props);\n    const childrenArray = React.Children.map(children, (child, index) => {\n      return this.renderChild(child, `${index}`);\n    });\n    if (loop && childrenArray) {\n      // @ts-ignore\n      childrenArray.unshift(this.renderChild(children[length - 1], `${length - 1}-clone`));\n      // @ts-ignore\n      childrenArray.push(this.renderChild(children[0], `${0}-clone`));\n    }\n    return childrenArray;\n  }\n  renderPageControl() {\n    const {\n      pageControlPosition,\n      pageControlProps = {}\n    } = this.props;\n    if (pageControlPosition) {\n      const {\n        size = 6,\n        spacing = 8,\n        color = Colors.$backgroundNeutralHeavy,\n        inactiveColor = Colors.$backgroundDisabled,\n        ...others\n      } = pageControlProps;\n      const pagesCount = presenter.getChildrenLength(this.props);\n      const containerStyle = pageControlPosition === PageControlPosition.UNDER ? {\n        marginVertical: 16 - this.getContainerPaddingVertical()\n      } : styles.pageControlContainerStyle;\n      return <PageControl size={size} spacing={spacing} containerStyle={containerStyle} inactiveColor={inactiveColor} color={color} {...others} numOfPages={pagesCount} currentPage={this.getCalcIndex(this.state.currentPage)} />;\n    }\n  }\n  renderCounter() {\n    const {\n      pageWidth,\n      showCounter,\n      counterTextStyle\n    } = this.props;\n    const {\n      currentStandingPage\n    } = this.state;\n    const pagesCount = presenter.getChildrenLength(this.props);\n    if (showCounter && !pageWidth) {\n      return <View center style={styles.counter}>\n          <Text grey80 text90 style={[{\n          fontWeight: 'bold'\n        }, counterTextStyle]}>\n            {currentStandingPage + 1}/{pagesCount}\n          </Text>\n        </View>;\n    }\n  }\n  renderAccessibleLayout() {\n    const {\n      containerStyle,\n      children,\n      testID\n    } = this.props;\n    return <View style={containerStyle} onLayout={this.onContainerLayout}>\n        <ScrollView testID={testID} ref={this.carousel} showsVerticalScrollIndicator={false} pagingEnabled onContentSizeChange={this.onContentSizeChange} onScroll={this.onScroll} onMomentumScrollEnd={this.onMomentumScrollEnd}>\n          {React.Children.map(children, (child, index) => {\n          return this.renderChild(child, `${index}`);\n        })}\n        </ScrollView>\n      </View>;\n  }\n  renderCarousel() {\n    const {\n      containerStyle,\n      animated,\n      horizontal,\n      animatedScrollOffset,\n      ...others\n    } = this.props;\n    const scrollContainerStyle = this.shouldUsePageWidth() ? {\n      paddingRight: this.getItemSpacings(this.props)\n    } : undefined;\n    const snapToOffsets = this.getSnapToOffsets();\n    const marginBottom = Math.max(0, this.getContainerPaddingVertical() - 16);\n    const ScrollContainer = animatedScrollOffset ? Animated.ScrollView : ScrollView;\n    const contentOffset = this.getInitialContentOffset(snapToOffsets);\n    return <View animated={animated} style={[{\n      marginBottom\n    }, containerStyle]} onLayout={this.onContainerLayout}>\n        <ScrollContainer showsHorizontalScrollIndicator={false} showsVerticalScrollIndicator={false} decelerationRate=\"fast\" scrollEventThrottle={200} {...others} ref={this.carousel} onScroll={animatedScrollOffset ? this.onScrollEvent : this.onScroll} contentContainerStyle={scrollContainerStyle} horizontal={horizontal} pagingEnabled={this.shouldEnablePagination()} snapToOffsets={snapToOffsets} contentOffset={contentOffset}\n      // onContentSizeChange={this.onContentSizeChange}\n      onMomentumScrollEnd={this.onMomentumScrollEnd}>\n          {this.renderChildren()}\n        </ScrollContainer>\n        {this.renderPageControl()}\n        {this.renderCounter()}\n      </View>;\n  }\n  render() {\n    return this.shouldAllowAccessibilityLayout() ? this.renderAccessibleLayout() : this.renderCarousel();\n  }\n}\nexport { Carousel }; // For tests\nexport default asBaseComponent(Carousel);\nconst styles = StyleSheet.create({\n  counter: {\n    paddingHorizontal: 8,\n    paddingVertical: 3,\n    borderRadius: 20,\n    backgroundColor: Colors.rgba(Colors.black, 0.6),\n    position: 'absolute',\n    top: 12,\n    right: 12\n  },\n  pageControlContainerStyle: {\n    position: 'absolute',\n    bottom: 16,\n    alignSelf: 'center'\n  },\n  hiddenText: {\n    position: 'absolute',\n    width: 1\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}